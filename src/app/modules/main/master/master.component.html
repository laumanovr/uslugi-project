<div class="row main">
  <!--Nav bar-->
  <div class="nav-bar">
    <app-nav-bar></app-nav-bar>
  </div>

  <div class="master-content-wrapper">
    <div class="header">
      <i class="material-icons header-icon" *ngIf="!popup" (click)="onClickBack()">arrow_back</i>
      <i class="material-icons header-icon" *ngIf="popup" (click)="popup = false">clear</i>
      <span class="header-title">Позвонить исполнителю</span>
    </div>

    <h3 class="master-title">Исполнитель</h3>

    <app-master-desc class="master-desc" [master]="master" [modal]="popup" (modalClose)="closePopup($event)" (click)="popup = true"></app-master-desc>

    <button class="master-btn" (click)="onCall()">Позвонить</button>

    <div class="master-bottom">
      <h3 class="master-title master-title-2">Смена исполнителя</h3>
      <div class="row master-link" (click)="onNavContractors()">
        <span class="master-link-elem">Выбрать другого исполнителя</span>
        <i class="material-icons master-link-icon">keyboard_arrow_right</i>
      </div>
      <div class="row master-link-2">
        <span class="master-link-elem" id="createWithOperator" (click)="orderCreate($event)">Заказать через оператора</span>
        <i class="material-icons master-link-icon">keyboard_arrow_right</i>
      </div>
    </div>

    <!--Call popup-->
    <div class="modal" id="modal" *ngIf="modal" (click)="onClickOverModal($event)">
      <div class="popup">
        <div class="call-to-operator">Звонок оператору</div>
        <button class="btn-operator" (click)="onStartVideoCall()">
          <img src="../../../../assets/img/videocalls.svg">
          <b>Видеозвонок</b>
        </button>
        <button class="btn-operator" (click)="onStartAudioCall()">
          <img src="../../../../assets/img/audiocalls.svg">
          <b>Аудиозвонок</b>
        </button>

        <div class="call-to-master">Звонок исполнителю</div>

        <button class="btn-operator" (click)="onStartMasterCallAudio()">
          <img src="../../../../assets/img/audiocalls.svg">
          <b>Аудиозвонок</b>
        </button>
      </div>
    </div>

  </div>
</div>

<div class="modal" id="video_modal" *ngIf="videoModal">
  <div class="block">
    <div class="video_call">Видеозвонок</div>
    <div class="operator">
      <div class="video_image">идет соединение</div>
      <div class="name">Оператор {{name}}</div>
      <div class="timer">00:30</div>
    </div>
    <a class="complete" (click)="onCompleteVideoCall()">
      <img src="../../../../assets/img/ic-end-call.svg">
      <div class="finish_call">Завершить вызов</div>
    </a>
  </div>
</div>

<div class="modal" id="audio_modal" *ngIf="audioModal">
  <div class="block">
    <div class="audio_call">Аудиозвонок</div>
    <div class="operator">
      <img src="../../../../assets/img/tech-support.jpg">
      <div class="name">Оператор {{name}}</div>
      <div class="timer">00:30</div>
      <div class="connecting">идет соединение</div>
    </div>
    <div class="complete" (click)="onCompleteAudioCall()">
      <img src="../../../../assets/img/ic-end-call.svg">
      <div class="finish_call">Завершить вызов</div>
    </div>
  </div>
</div>

<div class="modal" id="master_call_audio_modal" *ngIf="masterCallModal">
  <div class="block">
    <div class="audio_call">Аудиозвонок</div>
    <div class="operator">
      <img [src]="masterAvatar">
      <div class="name">{{master.name}}</div>
      <div class="timer">00:30</div>
      <div class="connecting">идет соединение</div>
    </div>
    <div class="complete" (click)="onCompleteMasterCall()">
      <img src="../../../../assets/img/ic-end-call.svg">
      <div class="finish_call">Завершить вызов</div>
    </div>
  </div>
</div>
