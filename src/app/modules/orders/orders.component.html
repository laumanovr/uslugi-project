<div class="row main">
  <!--Nav bar-->
  <div class="nav-bar">
    <app-nav-bar></app-nav-bar>
  </div>

  <div class="content-wrapper">
    <!--Header-->
    <div class="header">
      <i class="material-icons header-icon" (click)="onClickBack()">arrow_back</i>
      <p class="header-title">Мои заказы</p>
    </div>

    <!--Not authorized notification-->
    <div *ngIf="noOrders" class="authorized">
      <p class="notif-title">Вход в систему</p>
      <p class="notif-text m-t-20">Для просмотра заказов необходимо авторизоваться</p>
      <button class="btn btn-orange m-t-20" (click)="onClickAuth()">Войти</button>
    </div>

    <!--Content-->
    <div *ngIf="!noOrders">
      <!--Content nav bar-->
      <div class="row list-nav-cont">
        <p class="list-nav-info" id="navTap1" (click)="onClickTap1()">АКТИВНЫЕ</p>
        <p class="list-nav-rev" id="navTap2" (click)="onClickTap2()">ВЫПОЛНЕННЫЕ</p>
      </div>

      <div class="row">
        <!--Tap 1-->
        <div class="row tap-1" *ngIf="tap">

          <div class="order" *ngFor="let order of orders">
            <div class="row order-desc-1">
              <div class="list-date">
                <p class="list-day">{{order.day}}</p>
                <p class="list-month">{{order?.month}}</p>
              </div>

              <div class="list-desc">
                <p class="order-title">{{order.serviceName}}</p>
                <div class="row">
                  <p class="order-key">Адрес:</p>
                  <p class="order-prop">{{order.address}}</p>
                </div>
                <div class="row">
                  <p class="order-key">Дата:</p>
                  <p class="order-prop">{{order.orderDate}}</p>
                </div>
                <div class="row">
                  <p class="order-key">Время:</p>
                  <p class="order-prop">{{order.time}}</p>
                </div>
                <div class="row">
                  <p class="order-key">Оплата:</p>
                  <p class="order-prop">{{order.total}} сом <span class="order-key">(предварительно)</span></p>
                </div>
              </div>
            </div>

            <button class="order-btn" (click)="onClickDesc()">Подробнее</button>

            <div class="row order-btn-con">
              <button class="order-btn1">Написать</button>
              <button class="order-btn2" (click)="modal = true">Позвонить</button>
            </div>

            <div class="row order-not-accept" *ngIf="order.status === 'not_accepted'"
                 (click)="onAcceptOrder(order.id)">
              <i class="material-icons info-icon">info_outline</i>
              <p>Требуется ваше подтверждение</p>
            </div>

            <div class="row order-accept" *ngIf="order.status === 'accepted'">
              <i class="material-icons info-icon">done</i>
              <p>Заказ принят. Ожидайте исполнения</p>
            </div>

            <div class="row order-aborted" *ngIf="order.status === 'aborted'">
              <i class="material-icons info-icon">error</i>
              <p>Заказ отменен</p>
            </div>

            <button class="btn m-10" (click)="onCompleteOrder(order.id)">Завершить (для тестов)</button>

          </div>
        </div>

        <!--Tap 2-->
        <div class="row tap-1" *ngIf="!tap">
          <div class="order" *ngFor="let order of ordersCompleted">
            <div class="row order-desc-1">
              <div class="list-date">
                <p class="list-day">{{order.day}}</p>
                <p class="list-month">{{order?.month}}</p>
              </div>

              <div class="list-desc">
                <p class="order-title">{{order.serviceName}}</p>
                <div class="row">
                  <p class="order-key">Адрес:</p>
                  <p class="order-prop">{{order.address}}</p>
                </div>
                <div class="row">
                  <p class="order-key">Дата:</p>
                  <p class="order-prop">{{order.orderDate}}</p>
                </div>
                <div class="row">
                  <p class="order-key">Время:</p>
                  <p class="order-prop">{{order.time}}</p>
                </div>
                <div class="row">
                  <p class="order-key">Оплата:</p>
                  <p class="order-prop">{{order.total}} сом <span class="order-key">(предварительно)</span></p>
                </div>
              </div>
            </div>

            <button class="order-btn">Подробнее</button>
            <div class="row order-btn-con">
              <button class="order-btn1">Написать</button>
              <button class="order-btn2" (click)="onClickReview()">Оценить</button>
            </div>
            <div class="row order-complete">
              <i class="material-icons info-icon">done_all</i>
              <p>Заказ выполнен</p>
            </div>
          </div>
        </div>

        <!--Call popup-->
        <div class="modal" id="modal" *ngIf="modal" (click)="onClickOverModal($event)">
          <div class="popup">
            <button class="btn btn-operator">
              <i class="material-icons phone-icon">phone</i>
              Звонок оператору
            </button>
            <button class="btn btn-operator">
              <i class="material-icons phone-icon">phone</i>
              Звонок исполнителю
            </button>
          </div>
        </div>

      </div>

    </div>
  </div>
</div>
